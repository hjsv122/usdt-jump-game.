app.post("/withdraw", async (req, res) => {
  const { from, to } = req.body;
  const amount = userProfits[from];

  if (!amount || amount < 250) return res.status(400).send({ message: "الرصيد غير كاف للسحب", success: false });

  const fee = amount * 0.02;
  const finalAmount = amount - fee;

  // تنفيذ التحويل باستخدام TronGrid أو TronWeb هنا (لم يتم إدراجه الآن لأسباب أمنية)

  userProfits[from] = 0; // تصفير الرصيد بعد السحب

  res.send({ message: `تم إرسال $${finalAmount.toFixed(2)} إلى ${to} بعد خصم الرسوم.`, success: true });
});
